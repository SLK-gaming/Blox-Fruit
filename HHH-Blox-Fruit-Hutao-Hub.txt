local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/hungquan99/FluentUI/master/Addons/SaveManager.lua"))()

local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/hungquan99/FluentUI/master/Addons/InterfaceManager.lua"))()

local minimizeUI = Enum.KeyCode.RightAlt

-- üü¢ Create Main UI
local Window = Fluent:CreateWindow({
    Title = "Hutao hub [FREE]",
    SubTitle = "Blox Fruits",
    TabWidth = 160,
    Size = UDim2.fromOffset(480, 360),
    Acrylic = false,
    Theme = "Darker",
    MinimizeKey = minimizeUI
})

-- Tabs
local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "home" }),
    Setting = Window:AddTab({ Title = "Setting", Icon = "settings" }),
    Stats = Window:AddTab({ Title = "Stats", Icon = "plus-circle" }),
    Player = Window:AddTab({ Title = "Player", Icon = "box" }),
    Teleport = Window:AddTab({ Title = "Island", Icon = "palmtree" }),
    Fruit = Window:AddTab({ Title = "Fruit", Icon = "cherry" }),
    Raid = Window:AddTab({ Title = "Raid", Icon = "swords" }),
    Race = Window:AddTab({ Title = "Race V4", Icon = "chevrons-right" }),
    Shop = Window:AddTab({ Title = "Shop", Icon = "shopping-cart" }),
	Misc = Window:AddTab({ Title = "Misc", Icon = "list-plus" }),
    Hop = Window:AddTab({ Title = "Hop", Icon = "wifi" }),
}    








--------------------------------------------------------------------------------------------------------------------------------------------
--misc

Tabs.Misc:AddButton({
	Title = "Rejoin Server",
	Description = "tham gia l·∫°i m√°y ch·ªß",
	Callback = function()
		game:GetService("TeleportService"):Teleport(game.PlaceId, game:GetService("Players").LocalPlayer)
	end
})


Tabs.Misc:AddButton({
	Title = "Hop Server",
	Description = "ƒê·ªïi m√°y ch·ªß",
	Callback = function()
		Hop()
	end
})

function Hop()
	local PlaceID = game.PlaceId
	local AllIDs = {}
	local foundAnything = ""
	local actualHour = os.date("!*t").hour
	local Deleted = false
	function TPReturner()
		local Site;
		if foundAnything == "" then
			Site = game.HttpService:JSONDecode(game:HttpGet('https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100'))
		else
			Site = game.HttpService:JSONDecode(game:HttpGet('https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100&cursor=' .. foundAnything))
		end
		local ID = ""
		if Site.nextPageCursor and Site.nextPageCursor ~= "null" and Site.nextPageCursor ~= nil then
			foundAnything = Site.nextPageCursor
		end
		local num = 0;
		for i,v in pairs(Site.data) do
			local Possible = true
			ID = tostring(v.id)
			if tonumber(v.maxPlayers) > tonumber(v.playing) then
				for _,Existing in pairs(AllIDs) do
					if num ~= 0 then
						if ID == tostring(Existing) then
							Possible = false
						end
					else
						if tonumber(actualHour) ~= tonumber(Existing) then
							local delFile = pcall(function()
								AllIDs = {}
								table.insert(AllIDs, actualHour)
							end)
						end
					end
					num = num + 1
				end
				if Possible == true then
					table.insert(AllIDs, ID)
					wait()
					pcall(function()
						wait()
						game:GetService("TeleportService"):TeleportToPlaceInstance(PlaceID, ID, game.Players.LocalPlayer)
					end)
					wait(4)
				end
			end
		end
	end
	function Teleport() 
		while wait() do
			pcall(function()
				TPReturner()
				if foundAnything ~= "" then
					TPReturner()
				end
			end)
		end
	end
	Teleport()
end      


local Mastery = Tabs.Misc:AddSection("Team")


Tabs.Misc:AddButton({
	Title = "Join Pirates Team",
	Description = "V√†o h·∫£i t·∫∑c",
	Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam","Pirates") 
	end
})


Tabs.Misc:AddButton({
	Title = "Join Marines Team",
	Description = "V√†o h·∫£i qu√¢n",
	Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam","Marines") 
	end
})

local Mastery = Tabs.Misc:AddSection("Open Ui")

Tabs.Misc:AddButton({
	Title = "Devil Shop Menu",
	Description = "M·ªü c·ª≠a h√†ng tr√°i",
	Callback = function()
		game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("GetFruits")
        game:GetService("Players").LocalPlayer.PlayerGui.Main.FruitShop.Visible = true
	end
})



Tabs.Misc:AddButton({
	Title = "Color Haki Menu",
	Description = "M·ªü b·∫£ng haki",
	Callback = function()
		game.Players.localPlayer.PlayerGui.Main.Colors.Visible = true
	end
})



Tabs.Misc:AddButton({
	Title = "Title Name Menu",
	Description = "M·ªü b·∫£ng danh hi·ªáu",
	Callback = function()
		local args = {
			[1] = "getTitles"
		}
		game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
		game.Players.localPlayer.PlayerGui.Main.Titles.Visible = true
	end
})



Tabs.Misc:AddButton({
	Title = "Awakening Menu",
	Description = "M·ªü b·∫£ng th·ª©c t·ªânh chi√™u",
	Callback = function()
        game:GetService("Players").LocalPlayer.PlayerGui.Main.AwakeningToggler.Visible = true
	end
})


local Mastery = Tabs.Misc:AddSection("Troll")


Tabs.Misc:AddButton({
	Title = "Rain Fruit",
	Description = "M∆∞a tr√°i √°c qu·ª∑",
	Callback = function()
        for i, v in pairs(game:GetObjects("rbxassetid://14759368201")[1]:GetChildren()) do
            v.Parent = game.Workspace.Map
            v:MoveTo(game.Players.LocalPlayer.Character.PrimaryPart.Position + Vector3.new(math.random(-50, 50), 100, math.random(-50, 50)))
            if v.Fruit:FindFirstChild("AnimationController") then
                v.Fruit:FindFirstChild("AnimationController"):LoadAnimation(v.Fruit:FindFirstChild("Idle")):Play()
            end
            v.Handle.Touched:Connect(function(otherPart)
                if otherPart.Parent == game.Players.LocalPlayer.Character then
                    v.Parent = game.Players.LocalPlayer.Backpack
                    game.Players.LocalPlayer.Character.Humanoid:EquipTool(v)
                end
            end)
        end
	end
})



local Mastery = Tabs.Misc:AddSection("Misc")


local ToggleRejoin = Tabs.Misc:AddToggle("ToggleRejoin", {Title = "Auto Rejoin", Description = "T·ª± ƒë·ªông v√†o l·∫°i khi b·ªã vƒÉng",Default = true })
ToggleRejoin:OnChanged(function(Value)
	_G.AutoRejoin = Value
end)

Options.ToggleRejoin:SetValue(true)
spawn(function()
	while wait() do
		if _G.AutoRejoin then
				getgenv().rejoin = game:GetService("CoreGui").RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(child)
					if child.Name == 'ErrorPrompt' and child:FindFirstChild('MessageArea') and child.MessageArea:FindFirstChild("ErrorFrame") then
						game:GetService("TeleportService"):Teleport(game.PlaceId)
					end
				 end)
			end
		end
	end)



-- Section: Kaitun Cap
local SectionKaitun = Tabs.Misc:AddSection("Kaitun Cap")

Tabs.Misc:AddButton({
    Title = "Show Items",
    Description = "Hi·ªÉn th·ªã v·∫≠t ph·∫©m",
    Callback = function()
        -- X√≥a UI c≈© n·∫øu c√≥
        local oldUI = game:GetService("CoreGui").RobloxGui.Modules.Profile:FindFirstChild("UILibrary")
        if oldUI then oldUI:Destroy() end

        local Lighting = game:GetService("Lighting")
        local oldBlur = Lighting:FindFirstChild("Blur")
        if oldBlur then oldBlur:Destroy() end

        local TweenService = game:GetService("TweenService")
        local Players = game:GetService("Players")
        local LocalPlayer = Players.LocalPlayer

        local blurEffect = Instance.new("BlurEffect")
        blurEffect.Parent = Lighting
        TweenService:Create(blurEffect, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.InOut), { Size = 50 }):Play()

        local invModule = require(LocalPlayer.PlayerGui.Main.UIController.Inventory)
        local inventory = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getInventory")
        local items = {}
        for _, v in pairs(inventory) do items[v.Name] = v end

        local rarityLevels = { "Mythical", "Legendary", "Rare", "Uncommon", "Common" }
        local rarityColors = {
            ["Common"] = Color3.fromRGB(179, 179, 179),
            ["Uncommon"] = Color3.fromRGB(92, 140, 211),
            ["Rare"] = Color3.fromRGB(140, 82, 255),
            ["Legendary"] = Color3.fromRGB(213, 43, 228),
            ["Mythical"] = Color3.fromRGB(238, 47, 50)
        }

        local function getRarity(color)
            for k, v in pairs(rarityColors) do
                if v == color then return k end
            end
        end

        local total = #getupvalue(invModule.UpdateRender, 4)
        local scanned, categorized, scannedCount = {}, {}, 0

        while scannedCount < total do
            local yOffset = 0
            while yOffset < 25000 and scannedCount < total do
                LocalPlayer.PlayerGui.Main.InventoryContainer.Right.Content.ScrollingFrame.CanvasPosition = Vector2.new(0, yOffset)
                for _, frame in pairs(LocalPlayer.PlayerGui.Main.InventoryContainer.Right.Content.ScrollingFrame.Frame:GetChildren()) do
                    if frame:IsA("Frame") and not scanned[frame.ItemName.Text] and frame.ItemName.Visible then
                        local rarity = getRarity(frame.Background.BackgroundColor3)
                        if rarity then
                            categorized[rarity] = categorized[rarity] or {}
                            table.insert(categorized[rarity], frame:Clone())
                        end
                        scannedCount += 1
                        scanned[frame.ItemName.Text] = true
                    end
                end
                yOffset += 20
            end
            wait()
        end

        local function createGrid(parent)
            local grid = Instance.new("UIGridLayout", parent)
            grid.CellPadding = UDim2.new(0.005, 0, 0.005, 0)
            grid.CellSize = UDim2.new(0, 70, 0, 70)
            grid.FillDirectionMaxCells = 100
            grid.FillDirection = Enum.FillDirection.Horizontal
        end

        local uiList = Instance.new("UIListLayout")
        uiList.FillDirection = Enum.FillDirection.Vertical
        uiList.SortOrder = Enum.SortOrder.LayoutOrder
        uiList.Padding = UDim.new(0, 10)

        local leftPanel = Instance.new("Frame", LocalPlayer.PlayerGui.BubbleChat)
        leftPanel.BackgroundTransparency = 1
        leftPanel.Size = UDim2.new(0.5, 0, 1, 0)
        uiList:Clone().Parent = leftPanel

        local rightPanel = Instance.new("Frame", LocalPlayer.PlayerGui.BubbleChat)
        rightPanel.BackgroundTransparency = 1
        rightPanel.Size = UDim2.new(0.5, 0, 1, 0)
        rightPanel.Position = UDim2.new(0.6, 0, 0, 0)
        uiList:Clone().Parent = rightPanel

        for rarity, frames in pairs(categorized) do
            local leftGroup = Instance.new("Frame", leftPanel)
            leftGroup.BackgroundTransparency = 1
            leftGroup.Size = UDim2.new(1, 0, 0, 0)
            leftGroup.AutomaticSize = Enum.AutomaticSize.Y
            leftGroup.LayoutOrder = table.find(rarityLevels, rarity)

            local rightGroup = Instance.new("Frame", rightPanel)
            rightGroup.BackgroundTransparency = 1
            rightGroup.Size = UDim2.new(1, 0, 0, 0)
            rightGroup.AutomaticSize = Enum.AutomaticSize.Y
            rightGroup.LayoutOrder = table.find(rarityLevels, rarity)

            createGrid(leftGroup)
            createGrid(rightGroup)

            for _, frame in pairs(frames) do
                local itemName = frame.ItemName.Text
                if items[itemName] and items[itemName].Mastery and frame.ItemLine2.Text ~= "Accessory" then
                    local masteryLabel = frame.ItemName:Clone()
                    masteryLabel.BackgroundTransparency = 1
                    masteryLabel.TextSize = 10
                    masteryLabel.TextXAlignment = Enum.TextXAlignment.Right
                    masteryLabel.TextYAlignment = Enum.TextYAlignment.Bottom
                    masteryLabel.ZIndex = 5
                    masteryLabel.Text = items[itemName].Mastery
                    masteryLabel.Size = UDim2.new(0.5, 0, 0.5, 0)
                    masteryLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
                    masteryLabel.Parent = frame
                    frame.Parent = leftGroup
                elseif frame.ItemLine2.Text == "Blox Fruit" then
                    frame.Parent = rightGroup
                end
            end
        end

        -- Hi·ªÉn th·ªã Mastery c·ªßa c√°c lo·∫°i v≈© kh√≠ c·∫≠n chi·∫øn
        local MeleeIcons = {
            ["Superhuman"] = Vector2.new(3, 2),
            ["DeathStep"] = Vector2.new(4, 3),
            ["ElectricClaw"] = Vector2.new(2, 0),
            ["SharkmanKarate"] = Vector2.new(0, 0),
            ["DragonTalon"] = Vector2.new(1, 5),
            ["GodHuman"] = Vector2.new(5, 5),
        }

        local meleeGroup = Instance.new("Frame", leftPanel)
        meleeGroup.BackgroundTransparency = 1
        meleeGroup.Size = UDim2.new(1, 0, 0, 0)
        meleeGroup.AutomaticSize = Enum.AutomaticSize.Y
        meleeGroup.LayoutOrder = 100
        createGrid(meleeGroup)

        for style, offset in pairs(MeleeIcons) do
            if game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Buy" .. style, true) == 1 then
                local icon = Instance.new("ImageLabel", meleeGroup)
                icon.Image = "rbxassetid://9945562382"
                icon.ImageRectSize = Vector2.new(100, 100)
                icon.ImageRectOffset = offset * 100
                icon.Size = UDim2.new(0, 70, 0, 70)
                icon.BackgroundTransparency = 1
            end
        end
    end
})

-- Section: Day
local SectionDay = Tabs.Misc:AddSection("Day")

Tabs.Misc:AddButton({
    Title = "Remove Fog",
    Description = "X√≥a s∆∞∆°ng m√π",
    Callback = function()
        local Lighting = game:GetService("Lighting")
        Lighting.FogEnd = 100000
        for _, obj in pairs(Lighting:GetDescendants()) do
            if obj:IsA("Atmosphere") then obj:Destroy() end
        end
    end
})


--------------------------------------------------------------------------------------------------------------------------------------------
--Hop

if First_Sea or Second_Sea then
    local Mastery = Tabs.Hop:AddSection("Thid Sea Please !!!")
end

if Third_Sea then
local ToggleFindMoon = Tabs.Hop:AddToggle("ToggleFindMoon", {Title = "Find Full Moon",Description = "T√¨m trƒÉng tr√≤n", Default = false })
ToggleFindMoon:OnChanged(function(Value)
    _G.AutoFindMoon = Value
end)
Options.ToggleFindMoon:SetValue(false)


spawn(function()
    while wait() do
        if _G.AutoFindMoon then
        if game:GetService("Lighting").Sky.MoonTextureId=="http://www.roblox.com/asset/?id=9709149052" or game:GetService("Lighting").Sky.MoonTextureId=="http://www.roblox.com/asset/?id=9709149431" then
            wait(2.0)
        elseif game:GetService("Lighting").Sky.MoonTextureId=="http://www.roblox.com/asset/?id=9709143733" then
            Hop()
            Fluent:Notify({
                Title = "Hutao Hub",
                Content = "Turn Off Find Full Moon...",
                SubContent = "", -- Optional
                Duration = 5 -- Set to nil to make the notification not disappear
            })
        elseif game:GetService("Lighting").Sky.MoonTextureId=="http://www.roblox.com/asset/?id=9709150401" then
            Hop()
            Fluent:Notify({
                Title = "Hutao Hub",
                Content = "Hop...",
                SubContent = "", -- Optional
                Duration = 5 -- Set to nil to make the notification not disappear
            })
        elseif game:GetService("Lighting").Sky.MoonTextureId=="http://www.roblox.com/asset/?id=9709149680" then
            Hop()
            Fluent:Notify({
                Title = "Hutao Hub",
                Content = "Hop...",
                SubContent = "", -- Optional
                Duration = 5 -- Set to nil to make the notification not disappear
            })
        else
            Hop()
            end
        end
    end
end)


local ToggleMirageIsland = Tabs.Hop:AddToggle("ToggleMirageIsland", {Title = "Find Mirage Island",Description = "T√¨m ƒë·∫£o b√≠ ·∫©n", Default = false })
ToggleMirageIsland:OnChanged(function(Value)
    _G.FindMirageIsland = Value
end)
Options.ToggleMirageIsland:SetValue(false)

spawn(function()
    while wait() do
    if _G.FindMirageIsland then
        if game:GetService("Workspace").Map:FindFirstChild("MysticIsland") or game:GetService("Workspace").Map:FindFirstChild("MysticIsland") then
            if HighestPointRealCFrame and (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - HighestPointRealCFrame.Position).Magnitude > 10 then
            Tween(getHighestPoint().CFrame * CFrame.new(0, 211.88, 0))
                end
        elseif not game:GetService("Workspace").Map:FindFirstChild("MysticIsland") or not game:GetService("Workspace").Map:FindFirstChild("MysticIsland") then
            Hop()
            end
        end
    end
end)
end
----------------------------------------------------------------------------------------------------------------------------------------------
Fluent:Notify({
    Title = "Hutao Hub",
    Content = "The script has been loaded.",
    Durtion = 3
})
warn("Hutao Hub Loading Completed !!")